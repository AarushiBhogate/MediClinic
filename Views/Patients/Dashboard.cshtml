@model MediClinic.ViewModels.PatientDashboardViewModel
@{
    Layout = "~/Views/Shared/_PatientLayout.cshtml";
    ViewData["Title"] = "Patient Dashboard";
}

<style>

    .dashboard-wrapper {
        padding: 40px;
    }

    .welcome-card {
        background: linear-gradient(135deg,#0f766e,#2563eb);
        color: white;
        padding: 35px;
        border-radius: 20px;
        margin-bottom: 35px;
        box-shadow: 0 25px 50px rgba(0,0,0,0.1);
    }

        .welcome-card h3 {
            margin-bottom: 8px;
        }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
        gap: 25px;
    }

    .stat-card {
        background: white;
        padding: 25px;
        border-radius: 18px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.06);
        transition: 0.3s ease;
    }

        .stat-card:hover {
            transform: translateY(-5px);
        }

    .stat-title {
        font-size: 14px;
        color: #777;
        margin-bottom: 8px;
    }

    .stat-value {
        font-size: 22px;
        font-weight: 600;
    }

    .appointment-box {
        margin-top: 40px;
        background: white;
        padding: 30px;
        border-radius: 18px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.06);
    }

    .btn-primary {
        background: #2563eb;
        border: none;
        padding: 8px 18px;
        border-radius: 8px;
    }

</style>

<div class="dashboard-wrapper">

    <div class="welcome-card">
        <h3>Welcome back, @Model.Patient?.PatientName 👋</h3>
        <p>Your health overview at a glance.</p>
    </div>

    <div class="stats-grid">

        <div class="stat-card">
            <div class="stat-title">Next Appointment</div>
            <div class="stat-value">
                @if (Model.NextAppointment != null)
                {
                    @Model.NextAppointment.AppointmentDate?.ToString("dd MMM yyyy")
                }
                else
                {
                    <span>No upcoming appointment</span>
                }
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-title">Total Prescriptions</div>
            <div class="stat-value">
                @Model.TotalPrescriptions
            </div>
        </div>

    </div>

    <div class="appointment-box">
        <h5>Appointment Section</h5>
        <hr />

        @if (Model.NextAppointment != null)
        {
            <p><strong>Date:</strong> @Model.NextAppointment.AppointmentDate?.ToString("dd MMM yyyy")</p>
            <p><strong>Time:</strong> @Model.NextAppointment.AppointmentDate?.ToString("hh:mm tt")</p>
            <p><strong>Status:</strong> @Model.NextAppointment.ScheduleStatus</p>
            <p><strong>Reason:</strong> @Model.NextAppointment.Reason</p>

            <a asp-controller="Appointments"
               asp-action="Details"
               asp-route-id="@Model.NextAppointment.AppointmentId"
               class="btn btn-primary">
                View Appointment
            </a>
        }
        else
        {
            <p>No upcoming appointment.</p>
        }

        <a asp-controller="Patients"
           asp-action="BookAppointment"
           class="btn btn-teal mt-2">
            Book Appointment
        </a>
    </div>


</div>
