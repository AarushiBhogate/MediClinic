@model IEnumerable<MediClinic.Models.PurchaseOrderHeader>

@{
    ViewData["Title"] = "Order History";
    // Layout = "~/Views/Shared/_LayoutRoles.cshtml";
}



<div class="orders-page">

    <div class="container">

        <div class="text-center mb-5">
            <h2 class="page-title">Order History</h2>
        </div>

        @if (Model == null || !Model.Any())
        {
            <div class="custom-alert">
                <h5>No order history found</h5>
                <p>You have not processed any purchase orders yet.</p>
            </div>
        }
        else
        {
            <div class="row g-4">

                @foreach (var order in Model)
                {
                    <div class="col-lg-8 col-md-10 mx-auto">

                        <div class="order-card">

                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <div class="info-label">PO No:</div>
                                    <div class="info-value">@order.Pono</div>
                                </div>

                                <div>
                                    @if (order.PurchaseOrderStatus == "Approved")
                                    {
                                        <span class="status-badge status-approved">
                                            Approved
                                        </span>
                                    }
                                    else if (order.PurchaseOrderStatus == "Rejected")
                                    {
                                        <span class="status-badge status-rejected">
                                            Rejected
                                        </span>
                                    }
                                </div>
                            </div>

                            <div class="mb-4">
                                <span class="info-label">Date:</span>
                                <span class="info-value">
                                    @order.Podate)
                                </span>
                            </div>

                            <table class="table table-bordered order-table">
                                <thead>
                                    <tr>
                                        <th>Medicine</th>
                                        <th>Quantity</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in order.PurchaseProductLines)
                                    {
                                        <tr>
                                            <td>💊 @item.Drug.DrugTitle</td>
                                            <td>@item.Qty</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>

                        </div>

                    </div>
                }

            </div>
        }

    </div>

</div>
