@model IEnumerable<MediClinic.Models.PurchaseOrderHeader>

@{
    Layout = "~/Views/Shared/_ChemistLayout.cshtml";
}

<div class="dashboard-container">

    <div class="page-header-simple">
        <h2>Supplier Orders</h2>
        <p>Manage incoming purchase orders</p>
    </div>

    <div class="table-card">
        <div class="table-head">
            <div>PO No</div>
            <div>Date</div>
            <div>Status</div>
            <div>Action</div>
        </div>

        @foreach (var item in Model)
        {
            <div class="table-row">
                <div>@item.Pono</div>
                <div>@item.Podate?.ToString("dd-MM-yyyy")</div>
                <div>
                    <span class="status-badge
                            @(item.PoStatus == "Pending" ? "pending" :
                                                    item.PoStatus == "Dispatched" ? "dispatched" :
                                                    item.PoStatus == "Received" ? "delivered" : "")">
                        @item.PoStatus
                    </span>
                </div>

                <div>
                    @if (item.PoStatus == "Pending")
                    {
                        <a asp-action="ApproveOrder"
                           asp-route-id="@item.Poid"
                           class="btn-outline-sm">
                            Approve
                        </a>

                        <a asp-action="RejectOrder"
                           asp-route-id="@item.Poid"
                           class="btn-outline-sm">
                            Reject
                        </a>
                    }

                    @if (item.PoStatus == "Approved")
                    {
                        <a asp-action="DispatchOrder"
                           asp-route-id="@item.Poid"
                           class="btn-success-sm">
                            Dispatch
                        </a>
                    }

                </div>
            </div>
        }

    </div>

</div>