@using MediClinic.Models
@{
    var advice = ViewBag.Advice as PhysicianAdvice;
    var drugs = ViewBag.Drugs as List<SelectListItem>;
}

<div class="phys-container">

    <h2 class="phys-title">Add Prescription</h2>
    <p class="phys-subtitle">Add medicines for this appointment</p>

    <div class="phys-card">

        <div class="phys-info-grid mb-4">
            <div class="phys-info-item">
                <div class="phys-info-label">Patient</div>
                <div class="phys-info-value">
                    @advice?.Schedule?.Appointment?.Patient?.PatientName
                </div>
            </div>

            <div class="phys-info-item">
                <div class="phys-info-label">Date</div>
                <div class="phys-info-value">
                    @advice?.Schedule?.ScheduleDate
                </div>
            </div>

            <div class="phys-info-item">
                <div class="phys-info-label">Time</div>
                <div class="phys-info-value">
                    @advice?.Schedule?.ScheduleTime
                </div>
            </div>
        </div>

        <div class="phys-divider"></div>

        <form asp-action="Create" method="post">

            <input type="hidden" name="physicianAdviceId" value="@advice?.PhysicianAdviceId" />

            <div class="mb-3">
                <label class="fw-semibold mb-2">Drug</label>
                <select class="form-control phys-input" name="drugId" required>
                    <option value="">-- Select Drug --</option>
                    @if (drugs != null)
                    {
                        foreach (var d in drugs)
                        {
                            <option value="@d.Value">@d.Text</option>
                        }
                    }
                </select>
            </div>

            <div class="mb-3">
                <label class="fw-semibold mb-2">Dosage</label>
                <input class="form-control phys-input"
                       name="dosage"
                       placeholder="e.g. 1 tablet twice a day"
                       required />
            </div>

            <div class="mb-3">
                <label class="fw-semibold mb-2">Prescription</label>
                <input class="form-control phys-input"
                       name="prescription"
                       placeholder="e.g. After meals for 5 days"
                       required />
            </div>

            <div class="d-flex gap-3 mt-3">
                <button type="submit" class="btn btn-teal">
                    Add Medicine
                </button>

                <a asp-action="View"
                   asp-route-physicianAdviceId="@advice?.PhysicianAdviceId"
                   class="btn btn-outline-teal">
                    View Prescription
                </a>

                <a asp-controller="PhysicianAdvice"
                   asp-action="Index"
                   class="btn btn-outline-teal">
                    Back
                </a>
            </div>

        </form>
    </div>
</div>
