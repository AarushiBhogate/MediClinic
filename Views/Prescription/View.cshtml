
@{
    ViewData["Title"] = "Prescription";

    var patientName = ViewBag.PatientName as string;
    var date = ViewBag.Date;
    var time = ViewBag.Time;

    var list = ViewBag.Prescriptions as List<MediClinic.Models.PhysicianPrescrip>;
    var adviceId = ViewBag.PhysicianAdviceId;
}

@{
    adviceId = Convert.ToInt32(Context.Request.Query["physicianAdviceId"]);
}

<div class="phys-container">

    <h2 class="phys-title">Prescription</h2>
    <p class="phys-subtitle">View medicines prescribed for the patient</p>

    <div class="phys-card">

        <div class="phys-info-grid mb-4">
            <div class="phys-info-item">
                <div class="phys-info-label">Patient</div>
                <div class="phys-info-value">@patientName</div>
            </div>

            <div class="phys-info-item">
                <div class="phys-info-label">Date</div>
                <div class="phys-info-value">@date</div>
            </div>

            <div class="phys-info-item">
                <div class="phys-info-label">Time</div>
                <div class="phys-info-value">@time</div>
            </div>
        </div>

        <hr />

        <div class="phys-table-wrap">
            <table class="table phys-table">
                <thead>
                    <tr>
                        <th>Drug</th>
                        <th>Dosage</th>
                        <th>Prescription</th>
                    </tr>
                </thead>

                <tbody>
                    @if (list != null && list.Count > 0)
                    {
                        foreach (var item in list)
                        {
                            <tr>
                                <td>@item.Drug?.DrugTitle</td>
                                <td>@item.Dosage</td>
                                <td>@item.Prescription</td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="3" class="text-center text-muted py-4">
                                No medicines added.
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <div class="d-flex gap-2 mt-3">
            <<a class="btn btn-teal" href="/Prescription/Create?physicianAdviceId=@adviceId">
                Add More Medicines
            </a>


            <a class="btn btn-outline-teal" href="/PhysicianAdvice/Index">
                Back
            </a>
        </div>

    </div>
</div>
